<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS Coupler: full/flux_exchange.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FMS Coupler
   &#160;<span id="projectnumber">2022.03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f6406403be25082e487bde7aa9e18575.html">full</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Modules</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">flux_exchange.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<h3 class="version">(77618869f48507c8629f28457cb701e25e1ea4fc)</h3>
<p>The flux_exchange module provides interfaces to couple the following component models: atmosphere, ocean, land, and ice. All interpolation between physically distinct model grids is handled by the exchange grid (xgrid_mod) with the interpolated quantities being conserved.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Modules</h2></td></tr>
<tr class="memitem:namespaceflux__exchange__mod"><td class="memItemLeft" align="right" valign="top">module &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html">flux_exchange_mod</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a9d5d9cb2721d5b49e6dfbaefa89185f8"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a9d5d9cb2721d5b49e6dfbaefa89185f8">flux_exchange_mod::gas_exchange_init</a> (gas_fields_atm, gas_fields_ice, gas_fluxes)</td></tr>
<tr class="memdesc:a9d5d9cb2721d5b49e6dfbaefa89185f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gas and tracer exchange initialization routine.  <a href="namespaceflux__exchange__mod.html#a9d5d9cb2721d5b49e6dfbaefa89185f8">More...</a><br /></td></tr>
<tr class="separator:a9d5d9cb2721d5b49e6dfbaefa89185f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a4db6845eb6ba4aa2246e67c9bcc6b"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#aa0a4db6845eb6ba4aa2246e67c9bcc6b">flux_exchange_mod::flux_exchange_init</a> (Time, Atm, Land, Ice, Ocean, Ocean_state, atmos_ice_boundary, land_ice_atmos_boundary, land_ice_boundary, ice_ocean_boundary, ocean_ice_boundary, do_ocean, slow_ice_ocean_pelist, dt_atmos, dt_cpld)</td></tr>
<tr class="memdesc:aa0a4db6845eb6ba4aa2246e67c9bcc6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization routine.  <a href="namespaceflux__exchange__mod.html#aa0a4db6845eb6ba4aa2246e67c9bcc6b">More...</a><br /></td></tr>
<tr class="separator:aa0a4db6845eb6ba4aa2246e67c9bcc6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905b179ee9688d2feeef94f3417b25e5"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a905b179ee9688d2feeef94f3417b25e5">flux_exchange_mod::flux_check_stocks</a> (Time, Atm, Lnd, Ice, Ocn_state)</td></tr>
<tr class="memdesc:a905b179ee9688d2feeef94f3417b25e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check stock values.  <a href="namespaceflux__exchange__mod.html#a905b179ee9688d2feeef94f3417b25e5">More...</a><br /></td></tr>
<tr class="separator:a905b179ee9688d2feeef94f3417b25e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8482ebe698f25da2d177b2508fa9d2b8"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a8482ebe698f25da2d177b2508fa9d2b8">flux_exchange_mod::flux_init_stocks</a> (Time, Atm, Lnd, Ice, Ocn_state)</td></tr>
<tr class="memdesc:a8482ebe698f25da2d177b2508fa9d2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize stock values.  <a href="namespaceflux__exchange__mod.html#a8482ebe698f25da2d177b2508fa9d2b8">More...</a><br /></td></tr>
<tr class="separator:a8482ebe698f25da2d177b2508fa9d2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9500d8c86af3e964c1558bb7ae464e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a9b9500d8c86af3e964c1558bb7ae464e">flux_exchange_mod::check_atm_grid</a> (Atm, grid_file)</td></tr>
<tr class="separator:a9b9500d8c86af3e964c1558bb7ae464e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adc32e303ec9e035ac2ba95080dce45be"><td class="memItemLeft" align="right" valign="top">character(len=128)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#adc32e303ec9e035ac2ba95080dce45be">flux_exchange_mod::version</a> = '$Id$'</td></tr>
<tr class="separator:adc32e303ec9e035ac2ba95080dce45be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5f7ba78279ed6740597236c1930a65"><td class="memItemLeft" align="right" valign="top">character(len=128)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#aba5f7ba78279ed6740597236c1930a65">flux_exchange_mod::tag</a> = '$Name$'</td></tr>
<tr class="separator:aba5f7ba78279ed6740597236c1930a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc375ceab862873a6185a4c206bec41"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#aadc375ceab862873a6185a4c206bec41">flux_exchange_mod::do_init</a> = .true.</td></tr>
<tr class="separator:aadc375ceab862873a6185a4c206bec41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c281a982d5759280020c8accfa544bb"><td class="memItemLeft" align="right" valign="top">real, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a5c281a982d5759280020c8accfa544bb">flux_exchange_mod::bound_tol</a> = 1e-7</td></tr>
<tr class="separator:a5c281a982d5759280020c8accfa544bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8770c4bcde6c8a65e71388d68afe02cb"><td class="memItemLeft" align="right" valign="top">real, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a8770c4bcde6c8a65e71388d68afe02cb">flux_exchange_mod::d622</a> = rdgas/rvgas</td></tr>
<tr class="separator:a8770c4bcde6c8a65e71388d68afe02cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada557dace4f17fc5ceb45e4075f4d2f6"><td class="memItemLeft" align="right" valign="top">real, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#ada557dace4f17fc5ceb45e4075f4d2f6">flux_exchange_mod::d378</a> = 1.0-d622</td></tr>
<tr class="separator:ada557dace4f17fc5ceb45e4075f4d2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67568d1d617e7c1be6dbe00d7be3f4cc"><td class="memItemLeft" align="right" valign="top">real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a67568d1d617e7c1be6dbe00d7be3f4cc">flux_exchange_mod::z_ref_heat</a> = 2.</td></tr>
<tr class="memdesc:a67568d1d617e7c1be6dbe00d7be3f4cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference height (meters) for temperature and relative humidity diagnostics (t_ref, rh_ref, del_h, del_q)  <a href="namespaceflux__exchange__mod.html#a67568d1d617e7c1be6dbe00d7be3f4cc">More...</a><br /></td></tr>
<tr class="separator:a67568d1d617e7c1be6dbe00d7be3f4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dea7a4b0778ca1121bda4c7c6be8a9b"><td class="memItemLeft" align="right" valign="top">real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a2dea7a4b0778ca1121bda4c7c6be8a9b">flux_exchange_mod::z_ref_mom</a> = 10.</td></tr>
<tr class="memdesc:a2dea7a4b0778ca1121bda4c7c6be8a9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference height (meters) for mementum diagnostics (u_ref, v_ref, del_m)  <a href="namespaceflux__exchange__mod.html#a2dea7a4b0778ca1121bda4c7c6be8a9b">More...</a><br /></td></tr>
<tr class="separator:a2dea7a4b0778ca1121bda4c7c6be8a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ddd89d98ccfd23f971ae2e9152a977"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a26ddd89d98ccfd23f971ae2e9152a977">flux_exchange_mod::ex_u_star_smooth_bug</a> = .false.</td></tr>
<tr class="memdesc:a26ddd89d98ccfd23f971ae2e9152a977"><td class="mdescLeft">&#160;</td><td class="mdescRight">By default, the global exchange grid <code>u_star</code> will not be interpolated from atmospheric grid, this is different from Jakarta behavior and will change answers. So to preserve Jakarta behavior and reproduce answers explicitly set this namelist variable to .true. in input.nml.  <a href="namespaceflux__exchange__mod.html#a26ddd89d98ccfd23f971ae2e9152a977">More...</a><br /></td></tr>
<tr class="separator:a26ddd89d98ccfd23f971ae2e9152a977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1731b0c1ba2addb0cd311ea19c4da077"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a1731b0c1ba2addb0cd311ea19c4da077">flux_exchange_mod::sw1way_bug</a> = .false.</td></tr>
<tr class="separator:a1731b0c1ba2addb0cd311ea19c4da077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7b20d6cf50c73ac40939c022fddb32"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#afb7b20d6cf50c73ac40939c022fddb32">flux_exchange_mod::do_area_weighted_flux</a> = .FALSE.</td></tr>
<tr class="separator:afb7b20d6cf50c73ac40939c022fddb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a4e48184ac3df1924a4da5b3678836"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a85a4e48184ac3df1924a4da5b3678836">flux_exchange_mod::debug_stocks</a> = .FALSE.</td></tr>
<tr class="separator:a85a4e48184ac3df1924a4da5b3678836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bae6933b8309aa4e8677ae828c294b9"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a3bae6933b8309aa4e8677ae828c294b9">flux_exchange_mod::divert_stocks_report</a> = .FALSE.</td></tr>
<tr class="separator:a3bae6933b8309aa4e8677ae828c294b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae37ea2fadd4c406881499469dca2fc3e"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#ae37ea2fadd4c406881499469dca2fc3e">flux_exchange_mod::do_runoff</a> = .TRUE.</td></tr>
<tr class="memdesc:ae37ea2fadd4c406881499469dca2fc3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns on/off the land runoff interpolation to the ocean.  <a href="namespaceflux__exchange__mod.html#ae37ea2fadd4c406881499469dca2fc3e">More...</a><br /></td></tr>
<tr class="separator:ae37ea2fadd4c406881499469dca2fc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ce07eb820491557e1c3a345afd4c26"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a64ce07eb820491557e1c3a345afd4c26">flux_exchange_mod::do_forecast</a> = .false.</td></tr>
<tr class="separator:a64ce07eb820491557e1c3a345afd4c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a130755a7de1ad93566db2496df4f09a8"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a130755a7de1ad93566db2496df4f09a8">flux_exchange_mod::nblocks</a> = 1</td></tr>
<tr class="separator:a130755a7de1ad93566db2496df4f09a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3ce00fb63574459609d6b3ad334acb"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a2a3ce00fb63574459609d6b3ad334acb">flux_exchange_mod::partition_fprec_from_lprec</a> = .FALSE.</td></tr>
<tr class="memdesc:a2a3ce00fb63574459609d6b3ad334acb"><td class="mdescLeft">&#160;</td><td class="mdescRight">option for ATM override experiments where liquid+frozen precip are combined This option will convert liquid precip to snow when t_ref is less than tfreeze parameter  <a href="namespaceflux__exchange__mod.html#a2a3ce00fb63574459609d6b3ad334acb">More...</a><br /></td></tr>
<tr class="separator:a2a3ce00fb63574459609d6b3ad334acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ddeb5da1f6b84553155a11fc11131c4"><td class="memItemLeft" align="right" valign="top">real, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a7ddeb5da1f6b84553155a11fc11131c4">flux_exchange_mod::tfreeze</a> = 273.15</td></tr>
<tr class="separator:a7ddeb5da1f6b84553155a11fc11131c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f0bf7fd2d4d737a0c90c919458ed6e"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#ad4f0bf7fd2d4d737a0c90c919458ed6e">flux_exchange_mod::scale_precip_2d</a> = .false.</td></tr>
<tr class="separator:ad4f0bf7fd2d4d737a0c90c919458ed6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1a23e53559d3a711cb36e25fd4ace4"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a5f1a23e53559d3a711cb36e25fd4ace4">flux_exchange_mod::gas_fluxes_initialized</a> = .false.</td></tr>
<tr class="separator:a5f1a23e53559d3a711cb36e25fd4ace4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cdfe4f5a23bfa6c4ccaffbd9ad047bb"><td class="memItemLeft" align="right" valign="top">type(fmscoupler1dbc_type), target&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a4cdfe4f5a23bfa6c4ccaffbd9ad047bb">flux_exchange_mod::ex_gas_fields_atm</a></td></tr>
<tr class="memdesc:a4cdfe4f5a23bfa6c4ccaffbd9ad047bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure containing atmospheric surfacevariables that are used in the calculation of the atmosphere-ocean gas fluxes, as well as parameters regulating these fluxes.  <a href="namespaceflux__exchange__mod.html#a4cdfe4f5a23bfa6c4ccaffbd9ad047bb">More...</a><br /></td></tr>
<tr class="separator:a4cdfe4f5a23bfa6c4ccaffbd9ad047bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3a6680e20e123bfdf15e9690f52a4b8"><td class="memItemLeft" align="right" valign="top">type(fmscoupler1dbc_type), target&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#ad3a6680e20e123bfdf15e9690f52a4b8">flux_exchange_mod::ex_gas_fields_ice</a></td></tr>
<tr class="memdesc:ad3a6680e20e123bfdf15e9690f52a4b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure containing ice-top and ocean surface variables that are used in the calculation of the atmosphere-ocean gas fluxes, as well as parameters regulating these fluxes.  <a href="namespaceflux__exchange__mod.html#ad3a6680e20e123bfdf15e9690f52a4b8">More...</a><br /></td></tr>
<tr class="separator:ad3a6680e20e123bfdf15e9690f52a4b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24a89015e7d63bf306c3c98bc0ecbd60"><td class="memItemLeft" align="right" valign="top">type(fmscoupler1dbc_type), target&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a24a89015e7d63bf306c3c98bc0ecbd60">flux_exchange_mod::ex_gas_fluxes</a></td></tr>
<tr class="memdesc:a24a89015e7d63bf306c3c98bc0ecbd60"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure for exchanging gas or tracer fluxes between the atmosphere and ocean, defined by the field table, as well as a place holder of intermediate calculations, such as piston velocities, and parameters that impact the fluxes.  <a href="namespaceflux__exchange__mod.html#a24a89015e7d63bf306c3c98bc0ecbd60">More...</a><br /></td></tr>
<tr class="separator:a24a89015e7d63bf306c3c98bc0ecbd60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ced8a2d78de1df319982dc8c9b2236"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a19ced8a2d78de1df319982dc8c9b2236">flux_exchange_mod::ni_atm</a></td></tr>
<tr class="separator:a19ced8a2d78de1df319982dc8c9b2236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0530282de56c7247536aa084919fecc"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#af0530282de56c7247536aa084919fecc">flux_exchange_mod::nj_atm</a></td></tr>
<tr class="memdesc:af0530282de56c7247536aa084919fecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">to do atmos diagnostic from flux_ocean_to_ice  <a href="namespaceflux__exchange__mod.html#af0530282de56c7247536aa084919fecc">More...</a><br /></td></tr>
<tr class="separator:af0530282de56c7247536aa084919fecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9242eeec587851fa81280412c8b4f7a5"><td class="memItemLeft" align="right" valign="top">real, dimension(3)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a9242eeec587851fa81280412c8b4f7a5">flux_exchange_mod::ccc</a></td></tr>
<tr class="memdesc:a9242eeec587851fa81280412c8b4f7a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">for conservation checks  <a href="namespaceflux__exchange__mod.html#a9242eeec587851fa81280412c8b4f7a5">More...</a><br /></td></tr>
<tr class="separator:a9242eeec587851fa81280412c8b4f7a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55cfce099e27ac30a8a3e3c9f48849d8"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a55cfce099e27ac30a8a3e3c9f48849d8">flux_exchange_mod::cplclock</a></td></tr>
<tr class="separator:a55cfce099e27ac30a8a3e3c9f48849d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9c7bedc436dc8cb4a1e04e7f1a8383"><td class="memItemLeft" align="right" valign="top">real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a0c9c7bedc436dc8cb4a1e04e7f1a8383">flux_exchange_mod::dt_atm</a></td></tr>
<tr class="separator:a0c9c7bedc436dc8cb4a1e04e7f1a8383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dc660f54fcdc281c1d485e648d61560"><td class="memItemLeft" align="right" valign="top">real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a9dc660f54fcdc281c1d485e648d61560">flux_exchange_mod::dt_cpl</a></td></tr>
<tr class="separator:a9dc660f54fcdc281c1d485e648d61560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4133789f8990f2178df334764b71a74d"><td class="memItemLeft" align="right" valign="top">real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceflux__exchange__mod.html#a4133789f8990f2178df334764b71a74d">flux_exchange_mod::atm_precip_new</a></td></tr>
<tr class="separator:a4133789f8990f2178df334764b71a74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The flux_exchange module provides interfaces to couple the following component models: atmosphere, ocean, land, and ice. All interpolation between physically distinct model grids is handled by the exchange grid (xgrid_mod) with the interpolated quantities being conserved. </p>
<dl class="section author"><dt>Author</dt><dd>Bruce Wyman <a href="#" onclick="location.href='mai'+'lto:'+'Bru'+'ce'+'.Wy'+'ma'+'n@n'+'oa'+'a.g'+'ov'; return false;">Bruce<span style="display: none;">.nosp@m.</span>.Wym<span style="display: none;">.nosp@m.</span>an@no<span style="display: none;">.nosp@m.</span>aa.g<span style="display: none;">.nosp@m.</span>ov</a> </dd>
<dd>
V. Balaji <a href="#" onclick="location.href='mai'+'lto:'+'V.B'+'al'+'aji'+'@n'+'oaa'+'.g'+'ov'; return false;">V.Bal<span style="display: none;">.nosp@m.</span>aji@<span style="display: none;">.nosp@m.</span>noaa.<span style="display: none;">.nosp@m.</span>gov</a> </dd>
<dd>
Sergey Malyshev <a href="#" onclick="location.href='mai'+'lto:'+'Ser'+'ge'+'y.M'+'al'+'ysh'+'ev'+'@no'+'aa'+'.go'+'v'; return false;">Serge<span style="display: none;">.nosp@m.</span>y.Ma<span style="display: none;">.nosp@m.</span>lyshe<span style="display: none;">.nosp@m.</span>v@no<span style="display: none;">.nosp@m.</span>aa.go<span style="display: none;">.nosp@m.</span>v</a></dd></dl>
<ol type="1">
<li><p class="startli">This version of <a class="el" href="namespaceflux__exchange__mod.html">flux_exchange_mod</a> allows the definition of physically independent grids for atmosphere, land and sea ice. Ice and ocean must share the same physical grid (though the domain decomposition on parallel systems may be different). Grid information is input through the grid_spec file (URL). The masked region of the land grid and ice/ocean grid must "tile" each other. The masked region of the ice grid and ocean grid must be identical. </p><pre>
         ATMOSPHERE  |----|----|----|----|----|----|----|----|

               LAND  |---|---|---|---|xxx|xxx|xxx|xxx|xxx|xxx|

                ICE  |xxx|xxx|xxx|xxx|---|---|---|---|---|---|

               OCEAN |xxx|xxx|xxx|xxx|---|---|---|---|---|---|
 </pre><p class="startli">where <code>|xxx|</code> represents a masked grid point</p>
<p class="startli">The atmosphere, land, and ice grids exchange information using the exchange grid xmap_sfc.</p>
<p class="startli">The land and ice grids exchange runoff data using the exchange grid xmap_runoff.</p>
<p class="startli">Transfer of data between the ice bottom and ocean does not require an exchange grid as the grids are physically identical. The flux routines will automatically detect and redistribute data if their domain decompositions are different.</p>
<p class="startli">To get information from the atmosphere to the ocean it must pass through the ice model, first by interpolating from the atmospheric grid to the ice grid, and then transferring from the ice grid to the ocean grid.</p>
</li>
<li>Each component model must have a public defined data type containing specific boundary fields. A list of these quantities is located in the NOTES of this document.</li>
<li>The surface flux of sensible heat and surface evaporation can be implicit functions of surface temperature. As a consequence, the parts of the land and sea-ice models that update the surface temperature must be called on the atmospheric time step</li>
<li>The surface fluxes of all other tracers and of momentum are assumed to be explicit functions of all surface parameters.</li>
<li>While no explicit reference is made within this module to the implicit treatment of vertical diffusion in the atmosphere and in the land or sea-ice models, the module is designed to allow for simultaneous implicit time integration on both sides of the surface interface.</li>
<li>Due to #5, the diffusion part of the land and ice models must be called on the atmospheric time step, although in the case of concurrent-ice coupling, this version of the sea-ice that is called by the atmosphere may later be replaced by a version of the ice that is tightly coupled with the ocean.</li>
<li>The fluxes of additional tracers related to biological quantities or the air-sea exchange of gases are accomplished by specifying fields that will be passed between components via the "field_table" and the use of named fields in the coupler_..._bc_types.</li>
<li><p class="startli">Any field passed from one component to another may be "faked" to a constant value, or to data acquired from a file, using the data_override feature of FMS. The fields to override are runtime configurable, using the text file <code>data_table</code> for input. See the data_override_mod documentation for more details.</p>
<p class="startli">We DO NOT RECOMMEND exercising the data override capabilities of the FMS coupler until the user has acquired considerable sophistication in running FMS.</p>
<p class="startli">Here is a listing of the override capabilities of the flux_exchange module:</p><ul>
<li><p class="startli">FROM the atmosphere boundary TO the exchange grid (in sfc_boundary_layer):</p>
<p class="startli">t_bot, q_bot, z_bot, p_bot, u_bot, v_bot, p_surf, slp, gust</p>
</li>
<li><p class="startli">FROM the ice boundary TO the exchange grid (in sfc_boundary_layer):</p>
<p class="startli">t_surf, rough_mom, rough_heat, rough_moist, albedo, u_surf, v_surf</p>
</li>
<li><p class="startli">FROM the land boundary TO the exchange grid (in sfc_boundary_layer):</p>
<p class="startli">t_surf, t_ca, q_ca, rough_mom, rough_heat, albedo</p>
</li>
<li><p class="startli">FROM the exchange grid TO land_ice_atmos_boundary (in sfc_boundary_layer):</p>
<p class="startli">t, albedo, land_frac, dt_t, dt_q, u_flux, v_flux, dtaudu, dtaudv, u_star, b_star, rough_mom</p>
</li>
<li><p class="startli">FROM the atmosphere boundary TO the exchange grid (in flux_down_from_atmos):</p>
<p class="startli">flux_sw, flux_lw, lprec, fprec, coszen, dtmass, delta_t, delta_q, dflux_t, dflux_q</p>
</li>
<li><p class="startli">FROM the exchange grid TO the land boundary (in flux_down_from_atmos):</p>
<p class="startli">t_flux, q_flux, lw_flux, sw_flux, lprec, fprec, dhdt, dedt, dedq, drdt, drag_q, p_surf</p>
</li>
<li><p class="startli">FROM the exchange grid TO the ice boundary (in flux_down_from_atmos):</p>
<p class="startli">u_flux, v_flux, t_flux, q_flux, lw_flux, lw_flux_dn, sw_flux, sw_flux_dn, lprec, fprec, dhdt, dedt, drdt, coszen, p</p>
</li>
<li><p class="startli">FROM the land boundary TO the ice boundary (in flux_land_to_ice):</p>
<p class="startli">runoff, calving</p>
</li>
<li><p class="startli">FROM the ice boundary TO the ocean boundary (in flux_ice_to_ocean):</p>
<p class="startli">u_flux, v_flux, t_flux, q_flux, salt_flux, lw_flux, sw_flux, lprec, fprec, runoff, calving, p, ustar_berg, area_berg, mass_berg</p>
</li>
<li><p class="startli">FROM the ocean boundary TO the ice boundary (in flux_ocean_to_ice):</p>
<p class="startli">u, v, t, s, frazil, sea_level</p>
</li>
<li><p class="startli">FROM the ice boundary TO the atmosphere boundary (in flux_up_to_atmos):</p>
<p class="startli">t_surf</p>
</li>
<li><p class="startli">FROM the land boundary TO the atmosphere boundary (in flux_up_to_atmos):</p>
<p class="startli">t_ca, t_surf, q_ca</p>
</li>
</ul>
<p class="startli">See NOTES below for an explanation of the field names.</p>
</li>
</ol>
<h1><a class="anchor" id="diag_fields"></a>
Diagnostic Fields</h1>
<p>The table below contains the available diagnostic fields is the <code>flux</code> diagnostic module.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field Name   </th><th class="markdownTableHeadNone">Units   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">land_mask   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">Fractional amount of land    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">wind   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">Wind speed for flux calculations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drag_moist   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">Drag coeff for moisture    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">drag_heat   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">Drag coeff for heat    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drag_mom   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">Drag coeff for momentum    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">rough_moist   </td><td class="markdownTableBodyNone">m   </td><td class="markdownTableBodyNone">Surface roughness for moisture    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rough_heat   </td><td class="markdownTableBodyNone">m   </td><td class="markdownTableBodyNone">Surface roughness for heat    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">rough_mom   </td><td class="markdownTableBodyNone">m   </td><td class="markdownTableBodyNone">Surface roughness for momentum    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">u_star   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">Friction velocity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">b_star   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">Buoyancy scale    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">q_star   </td><td class="markdownTableBodyNone">kg water/kg air   </td><td class="markdownTableBodyNone">moisture scale    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">t_atm   </td><td class="markdownTableBodyNone">deg_k   </td><td class="markdownTableBodyNone">temperature at btm level    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">u_atm   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">u wind component at btm level    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">v_atm   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">v wind component at btm level    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">q_atm   </td><td class="markdownTableBodyNone">kg/kg   </td><td class="markdownTableBodyNone">specific humidity at btm level    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">p_atm   </td><td class="markdownTableBodyNone">pa   </td><td class="markdownTableBodyNone">pressure at btm level    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">z_atm   </td><td class="markdownTableBodyNone">m   </td><td class="markdownTableBodyNone">height of btm level    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">gust   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">gust scale    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rh_ref   </td><td class="markdownTableBodyNone">percent   </td><td class="markdownTableBodyNone">relative humidity at ref height    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">t_ref   </td><td class="markdownTableBodyNone">deg_k   </td><td class="markdownTableBodyNone">temperature at ref height    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">u_ref   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">zonal wind component at ref height    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">v_ref   </td><td class="markdownTableBodyNone">m/s   </td><td class="markdownTableBodyNone">meridional wind component at ref height    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">del_h   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">ref height interp factor for heat    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">del_m   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">ref height interp factor for momentum    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">del_q   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">ref height interp factor for moisture    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">tau_x   </td><td class="markdownTableBodyNone">pa   </td><td class="markdownTableBodyNone">zonal wind stress    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">tau_y   </td><td class="markdownTableBodyNone">pa   </td><td class="markdownTableBodyNone">meridional wind stress    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ice_mask   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">fractional amount of sea ice    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">t_surf   </td><td class="markdownTableBodyNone">deg_k   </td><td class="markdownTableBodyNone">surface temperature    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">t_ca   </td><td class="markdownTableBodyNone">deg_k   </td><td class="markdownTableBodyNone">canopy air temperature    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">q_surf   </td><td class="markdownTableBodyNone">kg/kg   </td><td class="markdownTableBodyNone">surface specific humidity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">shflx   </td><td class="markdownTableBodyNone">w/m2   </td><td class="markdownTableBodyNone">sensible heat flux    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">evap   </td><td class="markdownTableBodyNone">kg/m2/s   </td><td class="markdownTableBodyNone">evaporation rate    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">lwflx   </td><td class="markdownTableBodyNone">w/m2   </td><td class="markdownTableBodyNone">net (down-up) longwave flux   </td></tr>
</table>
<h1><a class="anchor" id="main_example"></a>
Main Program Example</h1>
<p>Below is some pseudo-code to illustrate the logic of the main loop.</p>
<div class="fragment"><div class="line"><span class="keywordflow">DO</span> slow time steps(ocean)</div>
<div class="line">   <span class="keyword">call </span>flux_ocean_to_ice</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>ice_slow_up</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">DO</span> fast time steps(atmos)</div>
<div class="line">      <span class="keyword">call </span>sfc_boundary_layer</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>atmos_down</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>flux_down_from_atmos</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>land_fast</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>ice_fast</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>flux_up_to_atmos</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>atmos_up</div>
<div class="line"><span class="keywordflow">   END DO</span></div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>ice_slow_dn</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>flux_ice_to_ocean</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>ocean</div>
<div class="line"><span class="keyword">END </span>DO</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>LAND_FAST and ICE_FAST must update the surface temperature</dd></dl>
<h1><a class="anchor" id="Required"></a>
Variables In Defined Data Types For Component Models</h1>
<h2><a class="anchor" id="Atmosphere"></a>
Atmosphere</h2>
<div class="fragment"><div class="line"><span class="keywordtype">type</span> (atmos_boundary_data_type) :: Atm</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span> :: Atm%lon_bnd &amp; <span class="comment">! longitude axis grid box boundaries in radians</span></div>
<div class="line">                                    <span class="comment">! must be monotonic</span></div>
<div class="line">                      atm%lat_bnd   <span class="comment">! latitude axis grid box boundaries in radians</span></div>
<div class="line">                                    <span class="comment">! must be monotonic</span></div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span> :: Atm%t_bot   &amp; <span class="comment">! temperature at lowest model level</span></div>
<div class="line">                        Atm%q_bot   &amp; <span class="comment">! specific humidity at lowest model level</span></div>
<div class="line">                        Atm%z_bot   &amp; <span class="comment">!    height above the surface for the lowest model level (m)</span></div>
<div class="line">                        Atm%p_bot   &amp; <span class="comment">!    pressure at lowest model level (pa)</span></div>
<div class="line">                        Atm%u_bot   &amp; <span class="comment">!    zonal wind component at lowest model level (m/s)</span></div>
<div class="line">                        Atm%v_bot   &amp; <span class="comment">!    meridional wind component at lowest model level (m/s)</span></div>
<div class="line">                        Atm%p_surf  &amp; <span class="comment">!   surface pressure (pa)</span></div>
<div class="line">                        Atm%slp     &amp; <span class="comment">!   sea level pressure (pa)</span></div>
<div class="line">                        Atm%gust    &amp; <span class="comment">!   gustiness factor (m/s)</span></div>
<div class="line">                        Atm%flux_sw &amp; <span class="comment">!  net shortwave flux at the surface</span></div>
<div class="line">                        Atm%flux_lw &amp; <span class="comment">!  downward longwave flux at the surface</span></div>
<div class="line">                        Atm%lprec   &amp; <span class="comment">!  liquid precipitation (kg/m2)</span></div>
<div class="line">                        Atm%fprec   &amp; <span class="comment">!  water equivalent frozen precipitation (kg/m2)</span></div>
<div class="line">                        Atm%coszen  &amp; <span class="comment">!  cosine of the zenith angle</span></div>
<div class="line"><span class="keywordtype">integer</span>, <span class="keywordtype">dimension(4)</span> :: Atm%axes <span class="comment">! Axis identifiers returned by diag_axis_init for the</span></div>
<div class="line">                                  ! atmospheric model axes: x, y, z_full, z_half.</div>
</div><!-- fragment --><p>The following five fields are gathered into a data type for convenience in passing this information through the different levels of the atmospheric model &ndash; these fields are rlated to the simultaneous implicit time steps in the atmosphere and surface models &ndash; they are described more fully in flux_exchange.tech.ps and in the documntation for vert_diff_mod</p>
<div class="fragment"><div class="line"><span class="keywordtype">type</span> (surf_diff_type) :: Atm%Surf_Diff</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span> :: Atm%Surf_Diff%dtmass  &amp; <span class="comment">! dt/mass where dt = atmospheric time step ((i+1) = (i-1) for leapfrog) (s)</span></div>
<div class="line">                                                <span class="comment">! mass = mass per unit area of lowest atmosphehic layer  (Kg/m2))</span></div>
<div class="line">                        atm%Surf_Diff%delta_t &amp; <span class="comment">! increment ((i+1) = (i-1) for leapfrog) in temperature of</span></div>
<div class="line">                                                <span class="comment">! lowest atmospheric layer  (K)</span></div>
<div class="line">                        atm%Surf_Diff%delta_q &amp; <span class="comment">! increment ((i+1) = (i-1) for leapfrog) in specific humidity of</span></div>
<div class="line">                                                <span class="comment">! lowest atmospheric layer (nondimensional -- Kg/Kg)</span></div>
<div class="line">                        atm%Surf_Diff%dflux_t &amp; <span class="comment">! derivative of implicit part of downward temperature flux at top of lowest</span></div>
<div class="line">                                                <span class="comment">! atmospheric layer with respect to temperature</span></div>
<div class="line">                                                <span class="comment">! of lowest atmospheric layer (Kg/(m2 s))</span></div>
<div class="line">                        atm%Surf_Diff%dflux_q   <span class="comment">! derivative of implicit part of downward moisture flux at top of lowest</span></div>
<div class="line">                                                <span class="comment">! atmospheric layer with respect to specific humidity of</span></div>
<div class="line">                                                ! of lowest atmospheric layer(kg/(m2 s))</div>
</div><!-- fragment --><h2><a class="anchor" id="Land"></a>
Land</h2>
<div class="fragment"><div class="line"><span class="keywordtype">type</span> (land_boundary_data_type) :: Land</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span> :: Land%lon_bnd &amp; <span class="comment">! longitude axis grid box boundaries in radians</span></div>
<div class="line">                                     <span class="comment">! must be monotonic</span></div>
<div class="line">                      land%lat_bnd   <span class="comment">! latitude axis grid box boundaries in radians</span></div>
<div class="line">                                     <span class="comment">! must be monotonic</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">logical</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Land%mask &amp; <span class="comment">! land/sea mask (true for land)</span></div>
<div class="line">                             Land%glacier <span class="comment">! glacier mask  (true for glacier)</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Land%tile_size  &amp; <span class="comment">!  fractional area of each tile (partition)</span></div>
<div class="line">                          Land%t_surf     &amp; <span class="comment">! surface temperature (deg k)</span></div>
<div class="line">                          Land%albedo     &amp; <span class="comment">! surface albedo (fraction)</span></div>
<div class="line">                          Land%rough_mom  &amp; <span class="comment">! surface roughness for momentum (m)</span></div>
<div class="line">                          Land%rough_heat &amp; <span class="comment">! surface roughness for heat/moisture (m)</span></div>
<div class="line">                          Land%stomatal   &amp; <span class="comment">! stomatal resistance</span></div>
<div class="line">                          Land%snow       &amp; <span class="comment">! snow depth (water equivalent) (kg/m2)</span></div>
<div class="line">                          Land%water      &amp; <span class="comment">! water depth of the uppermost bucket (kg/m2)</span></div>
<div class="line">                          Land%max_water    ! maximum water depth allowed in the uppermost bucket (kg/m2)</div>
</div><!-- fragment --><h2><a class="anchor" id="Ice"></a>
Ice</h2>
<div class="fragment"><div class="line"><span class="keywordtype">type</span> (ice_boundary_data_type) :: Ice</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span> :: Ice%lon_bnd    &amp; <span class="comment">! longitude axis grid box boundaries for temperature points</span></div>
<div class="line">                                       <span class="comment">! in radians (must be monotonic)</span></div>
<div class="line">                      ice%lat_bnd    &amp; <span class="comment">! latitude axis grid box boundaries for temperature points</span></div>
<div class="line">                                       <span class="comment">! in radians (must be monotonic)</span></div>
<div class="line">                      ice%lon_bnd_uv &amp; <span class="comment">! longitude axis grid box boundaries for momentum points</span></div>
<div class="line">                                       <span class="comment">! in radians (must be monotonic)</span></div>
<div class="line">                      ice%lat_bnd_uv   <span class="comment">! latitude axis grid box boundaries for momentum points</span></div>
<div class="line">                                       <span class="comment">! in radians (must be monotonic)</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">logical</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Ice%mask    &amp; <span class="comment">! ocean/land mask for temperature points</span></div>
<div class="line">                                           <span class="comment">! (true for ocean, with or without ice)</span></div>
<div class="line">                             ice%mask_uv &amp; <span class="comment">! ocean/land mask for momentum points</span></div>
<div class="line">                                           <span class="comment">! (true for ocean, with or without ice)</span></div>
<div class="line">                             ice%ice_mask  <span class="comment">! optional ice mask (true for ice)</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Ice%part_size  &amp; <span class="comment">! fractional area of each partition of a temperature grid box</span></div>
<div class="line">                          Ice%part_size_uv ! fractional area of each partition of a momentum grid box</div>
</div><!-- fragment --><p>The following fields are located on the ice top grid</p>
<div class="fragment"><div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Ice%t_surf     &amp; <span class="comment">! surface temperature (deg k)</span></div>
<div class="line">                          Ice%albedo     &amp; <span class="comment">! surface albedo (fraction)</span></div>
<div class="line">                          Ice%rough_mom  &amp; <span class="comment">! surface roughness for momentum (m)</span></div>
<div class="line">                          Ice%rough_heat &amp; <span class="comment">! surface roughness for heat/moisture (m)</span></div>
<div class="line">                          Ice%u_surf     &amp; <span class="comment">! zonal (ocean/ice) current at the surface (m/s)</span></div>
<div class="line">                          Ice%v_surf       ! meridional (ocean/ice) current at the surface (m/s)</div>
</div><!-- fragment --><p>The following fields are located on the ice bottom grid</p>
<div class="fragment"><div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span> :: Ice%flux_u  &amp; <span class="comment">! zonal wind stress (Pa)</span></div>
<div class="line">                          Ice%flux_v  &amp; <span class="comment">! meridional wind stress (Pa)</span></div>
<div class="line">                          Ice%flux_t  &amp; <span class="comment">! sensible heat flux (w/m2)</span></div>
<div class="line">                          Ice%flux_q  &amp; <span class="comment">! specific humidity flux (kg/m2/s)</span></div>
<div class="line">                          Ice%flux_sw &amp; <span class="comment">! net (down-up) shortwave flux (w/m2)</span></div>
<div class="line">                          Ice%flux_lw &amp; <span class="comment">! net (down-up) longwave flux (w/m2)</span></div>
<div class="line">                          Ice%lprec   &amp; <span class="comment">! mass of liquid precipitation since last time step (Kg/m2)</span></div>
<div class="line">                          Ice%fprec   &amp; <span class="comment">! mass of frozen precipitation since last time step (Kg/m2)</span></div>
<div class="line">                          Ice%runoff    ! mass of runoff water since last time step (Kg/m2)</div>
</div><!-- fragment --><h2><a class="anchor" id="Ocean"></a>
Ocean</h2>
<div class="fragment"><div class="line"><span class="keywordtype">type</span> (ocean_boundary_data_type) :: Ocean</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span> :: Ocean%Data%lon_bnd     &amp; <span class="comment">! longitude axis grid box boundaries for temperature</span></div>
<div class="line">                                               <span class="comment">! points on the ocean DATA GRID (radians)</span></div>
<div class="line">                      ocean%Data%lat_bnd     &amp; <span class="comment">! latitude axis grid box boundaries for temperature</span></div>
<div class="line">                                               <span class="comment">! points on the ocean DATA GRID (radians)</span></div>
<div class="line">                      ocean%Data%lon_bnd_uv  &amp; <span class="comment">! longitude axis grid box boundaries for momentum</span></div>
<div class="line">                                               <span class="comment">! points on the ocean DATA GRID (radians)</span></div>
<div class="line">                      ocean%Data%lat_bnd_uv  &amp; <span class="comment">! latitude axis grid box boundaries for momentum</span></div>
<div class="line">                                               <span class="comment">! points on the ocean DATA GRID (radians)</span></div>
<div class="line">                      ocean%Ocean%lon_bnd    &amp; <span class="comment">! longitude axis grid box boundaries for temperature</span></div>
<div class="line">                                               <span class="comment">! points on the ocean MODEL GRID (radians)</span></div>
<div class="line">                      ocean%Ocean%lat_bnd    &amp; <span class="comment">! latitude axis grid box boundaries for temperature</span></div>
<div class="line">                                               <span class="comment">! points on the ocean MODEL GRID (radians)</span></div>
<div class="line">                      ocean%Ocean%lon_bnd_uv &amp; <span class="comment">! longitude axis grid box boundaries for momentum</span></div>
<div class="line">                                               <span class="comment">! points on the ocean MODEL GRID (radians)</span></div>
<div class="line">                      ocean%Ocean%lat_bnd_uv &amp; <span class="comment">! latitude axis grid box boundaries for momentum</span></div>
<div class="line">                                               ! points on the ocean model grid(radians)</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The data values in all longitude and latitude grid box boundary array must be monotonic.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">logical</span>, <span class="keywordtype">dimension(:,:)</span> :: Ocean%Data%mask    &amp; <span class="comment">! ocean/land mask for temperature points on the ocean</span></div>
<div class="line">                                                <span class="comment">! DATA GRID (true for ocean)</span></div>
<div class="line">                           ocean%Data%mask_uv &amp; <span class="comment">! ocean/land mask for momentum points on the ocean</span></div>
<div class="line">                                                <span class="comment">! DATA GRID (true for ocean)</span></div>
<div class="line">                           ocean%Ocean%mask   &amp; <span class="comment">! ocean/land mask for temperature points on the ocean</span></div>
<div class="line">                                                <span class="comment">! MODEL GRID (true for ocean)</span></div>
<div class="line">                           ocean%Ocean%mask_uv  <span class="comment">! ocean/land mask for momentum points on the ocean</span></div>
<div class="line">                                                <span class="comment">! MODEL GRID (true for ocean)</span></div>
<div class="line"><span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span> :: Ocean%t_surf_data &amp; <span class="comment">! surface temperature on the ocean DATA GRID (deg k)</span></div>
<div class="line">                        Ocean%t_surf      &amp; <span class="comment">! surface temperature on the ocean MODEL GRID (deg k)</span></div>
<div class="line">                        Ocean%u_surf      &amp; <span class="comment">! zonal ocean current at the surface on the ocean</span></div>
<div class="line">                                            <span class="comment">! MODEL GRID (m/s)</span></div>
<div class="line">                        ocean%v_surf      &amp; <span class="comment">! meridional ocean current at the surface on the</span></div>
<div class="line">                                            <span class="comment">! ocean MODEL GRID (m/s)</span></div>
<div class="line">                        ocean%frazil        ! frazil at temperature points on the ocean model grid</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 27 2023 15:06:45 for FMS Coupler by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
