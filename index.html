<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FMS Coupler: FMS Coupler</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FMS Coupler<span id="projectnumber">&#160;2022.03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">FMS Coupler </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>FMS Coupler provides the capability to couple component models (atmosphere, land, sea ice, and ocean) on different logically rectangular grids. This repository holds 3 separate directories with driver programs for different usages along with modules with routines for common operations.</p>
<p>There are currently 3 <code>coupler_main</code> driver programs, each with their own directory:</p><ul>
<li>the original 'full' coupler_main</li>
<li>a slimmed down 'simple' version</li>
<li>a <a href="https://www.gfdl.noaa.gov/shield/"><b>SHiELD</b></a> version for use with the model</li>
</ul>
<p>Additionally, files in the 'shared' directory holds modules used by multiple drivers. The information below is provided for the full coupler, but there is considerable overlap between the other versions. Documentation on all programs and modules is available through the <a href="files.html"><b>files</b></a> tab.</p>
<dl class="section author"><dt>Author</dt><dd>Bruce Wyman <a href="#" onclick="location.href='mai'+'lto:'+'Bru'+'ce'+'.Wy'+'ma'+'n@n'+'oa'+'a.g'+'ov'; return false;">Bruce<span class="obfuscator">.nosp@m.</span>.Wym<span class="obfuscator">.nosp@m.</span>an@no<span class="obfuscator">.nosp@m.</span>aa.g<span class="obfuscator">.nosp@m.</span>ov</a> </dd>
<dd>
V. Balaji <a href="#" onclick="location.href='mai'+'lto:'+'V.B'+'al'+'aji'+'@n'+'oaa'+'.g'+'ov'; return false;">V.Bal<span class="obfuscator">.nosp@m.</span>aji@<span class="obfuscator">.nosp@m.</span>noaa.<span class="obfuscator">.nosp@m.</span>gov</a></dd></dl>
<p><a href="full_2coupler__main_8_f90.html"><b>coupler_main.F90</b></a> couples component models for atmosphere, ocean, land and sea ice on independent grids. It also controls the time integration.</p>
<p>This version couples model components representing atmosphere, ocean, land and sea ice on independent grids. Each model component is represented by a data type giving the instantaneous model state.</p>
<p>The component models are coupled to allow implicit vertical diffusion of heat and moisture at the interfaces of the atmosphere, land, and ice models. As a result, the atmosphere, land, and ice models all use the same time step. The atmospheric model has been separated into down and up calls that correspond to the down and up sweeps of the standard tridiagonal elimination.</p>
<p>The ocean interface uses explicit mixing. Fluxes to and from the ocean must be passed through the ice model. This includes atmospheric fluxes as well as fluxes from the land to the ocean (runoff).</p>
<p>This program contains the model's main time loop. Each iteration of the main time loop is one coupled (slow) time step. Within this slow time step loop is a fast time step loop, using the atmospheric time step, where the tridiagonal vertical diffusion equations are solved. Exchange between sea ice and ocean occurs once every slow timestep.</p>
<h1><a class="anchor" id="coupler_namelists"></a>
Namelists</h1>
<p>The three components of coupler: <a class="el" href="full_2coupler__main_8_f90.html#ae6938ccf85d88f9b7127a81ce195bad2">coupler_main</a> , <a class="el" href="namespaceflux__exchange__mod.html">flux_exchange_mod</a>, and <a class="el" href="namespacesurface__flux__mod.html" title="Module for the calculation of fluxes on the exchange grids.">surface_flux_mod</a> are configured through three namelists</p><ul>
<li><a class="el" href="coupler_config.html">coupler_nml</a></li>
<li><a class="el" href="flux_exchange_conf.html">flux_exchange_nml</a></li>
<li><a class="el" href="surface_flux_config.html">surface_flux_nml</a></li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li>If no value is set for current_date, start_date, or calendar (or default value specified) then the value from restart file "INPUT/coupler.res" will be used. If neither a namelist value or restart file value exist the program will fail.</li>
<li>The actual run length will be the sum of months, days, hours, minutes, and seconds. A run length of zero is not a valid option.</li>
<li>The run length must be an intergal multiple of the coupling timestep dt_cpld.</li>
</ol>
</dd></dl>
<h1><a class="anchor" id="Main"></a>
Program Example</h1>
<p>Below is some pseudo-code to illustrate the runtime loop of the coupler_main drivers.</p>
<div class="fragment"><div class="line"><span class="keywordflow">DO</span> slow time steps(ocean)</div>
<div class="line">   <span class="keyword">call </span>flux_ocean_to_ice</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>set_ice_surface_fields</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">DO</span> fast time steps(atmos)</div>
<div class="line">      <span class="keyword">call </span>flux_calculation</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>atmos_down</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>flux_down_from_atmos</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>land_fast</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>ice_fast</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>flux_up_to_atmos</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">call </span>atmos_up</div>
<div class="line"><span class="keywordflow">   ENDDO</span></div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>ice_slow</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>flux_ice_to_ocean</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">call </span>ocean</div>
<div class="line">enddo</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 28 2025 20:35:04 for FMS Coupler by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
